(this["webpackJsonpchat-room-app"]=this["webpackJsonpchat-room-app"]||[]).push([[0],{18:function(e,t,a){},22:function(e,t,a){e.exports=a(39)},27:function(e,t,a){},28:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(9),l=a.n(r),c=a(13),m=a(7),s=a(3),i=o.a.createContext({rooms:[],addRoom:function(){}}),u=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),r=a[0],l=a[1];return o.a.createElement(i.Provider,{value:{rooms:r,addRoom:function(e,t,a,n){var o=["a","b","c","d","e","f","g","h","i","j"],c=a.toFixed(0).toString().split("").map((function(e){return"".concat(o[e])})).join("");return l([].concat(Object(m.a)(r),[{name:e,theme:t,id:c,availability:n,posts:[]}])),c}}},e.children)},d=o.a.createContext({users:[],addUsers:function(){}}),p=function(e){var t=Object(n.useState)([{username:"dummy",roomId:"dummy"}]),a=Object(s.a)(t,2),r=a[0],l=a[1];return o.a.createElement(d.Provider,{value:{users:r,addUsers:function(e,t){l([].concat(Object(m.a)(r),[{username:e,roomId:t}])),console.log(r)}}},e.children)},b=(a(27),a(1)),E=(a(28),function(){return o.a.createElement("header",{className:"header"},o.a.createElement("h1",{className:"header--h1"},"Chat Room App"))}),f=(a(18),function(e){var t=Object(n.useContext)(i);return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:function(a){a.preventDefault();var n=a.target.roomName.value,o=a.target.theme.value,r=6e5*Math.random(),l=a.target.availability.value;t.addRoom(n,o,r,l),e.closeHandler(!1)},className:"form__container"},o.a.createElement("h1",{className:"form__heading"},"Create Room"),o.a.createElement("label",{htmlFor:"roomName",className:"form__label"},"Room Name :",o.a.createElement("input",{type:"text",name:"roomName",className:"form__input"})),o.a.createElement("label",{htmlFor:"theme",className:"form__label"},"Theme :",o.a.createElement("select",{name:"theme",className:"form__input"},o.a.createElement("option",{value:"red"},"Red"),o.a.createElement("option",{value:"blue"},"Blue"),o.a.createElement("option",{value:"green"},"Green"))),o.a.createElement("label",{htmlFor:"availability",className:"form__label"},"Availability :",o.a.createElement("select",{name:"availability",className:"form__input"},o.a.createElement("option",{value:"public"},"Public"),o.a.createElement("option",{value:"private"},"Private"))),o.a.createElement("button",{type:"submit",className:"form__button"},"Create")))}),_=function(){var e=Object(n.useContext)(i).rooms.map((function(e){if("public"===e.availability)return o.a.createElement(c.b,{className:"room__link",key:e.id,to:"/chatroom-prototype/room/".concat(e.id)},e.name," : ",e.id)}));return o.a.createElement("div",null,o.a.createElement("div",{className:"room__links--container"},o.a.createElement("h1",{className:"form__heading"},"Join Room"),o.a.createElement("div",{className:""},"Room Name : Room Id"),o.a.createElement("div",{className:"room__links"},e)))},v=function(e){var t=Object(n.useContext)(d);return o.a.createElement("form",{onSubmit:function(a){a.preventDefault();var n=a.target.username.value,o=window.location.pathname.substring(6);t.addUsers(n,o),e.addUser(n),e.closeHandler(!1)},className:"form__container"},o.a.createElement("h1",null,"Create User"),o.a.createElement("label",{htmlFor:"username",className:"form__label"},"UserName :",o.a.createElement("input",{type:"text",name:"username",className:"form__input"})),o.a.createElement("button",{type:"submit",className:"form__button"},"Join Room"))},h=function(e){return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a=t.target.title.value,n=t.target.description.value;console.log(e),e.setPost({title:a,description:n,upVote:0,downVote:0}),e.closeHandler(!1)},className:"form__container"},o.a.createElement("label",{htmlFor:"title",className:"form__label"},"Title",o.a.createElement("input",{type:"text",name:"title",className:"form__input"})),o.a.createElement("label",{htmlFor:"description",className:"form__label"},"Description",o.a.createElement("textarea",{name:"description",className:"form__input"})),o.a.createElement("button",{type:"submit",className:"form__button"},"Add Post")))},N=(a(34),function(e){return l.a.createPortal(o.a.createElement("div",{className:"backdrop",onClick:function(){e.closeHandler(!1)}}),document.getElementById("backdrop-hook"))}),j=(a(35),function(e){var t="";"create"===e.type&&(t=o.a.createElement(f,{closeHandler:e.closeHandler})),"join"===e.type&&(t=o.a.createElement(_,{closeHandler:e.closeHandler})),"user"===e.type&&(t=o.a.createElement(v,{closeHandler:e.closeHandler,addUser:e.addUser})),"post"===e.type&&(t=o.a.createElement(h,{closeHandler:e.closeHandler,setPost:e.setPost}));var a=o.a.createElement("div",{className:"modal"},t);return l.a.createPortal(a,document.getElementById("modal-hook"))}),y=function(e){return o.a.createElement("div",null,e.show&&o.a.createElement(N,{closeHandler:e.closeHandler}),e.show&&o.a.createElement(j,{type:e.type,closeHandler:e.closeHandler,setPost:e.setPost,addUser:e.addUser}))},O=(a(36),function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(""),c=Object(s.a)(l,2),m=c[0],u=c[1];Object(n.useContext)(i);return o.a.createElement("main",{className:"main"},a&&o.a.createElement(y,{show:a,type:m,closeHandler:r}),o.a.createElement("button",{className:"main--btn create",onClick:function(){u("create"),r(!0)}},"Create"),o.a.createElement("button",{className:"main--btn join",onClick:function(){u("join"),r(!0)}},"Join"))}),C=a(21),k=(a(37),function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),r=a[0],l=a[1],c=Object(n.useState)(0),m=Object(s.a)(c,2),i=m[0],u=m[1];return o.a.createElement("article",{className:"post__container"},o.a.createElement("div",null,o.a.createElement("h2",{className:"post__title"},e.title),o.a.createElement("div",{className:"post__description"},e.children)),o.a.createElement("div",{className:"post__upVote",onClick:function(){l(r+1)}},r),o.a.createElement("div",{className:"post__downVote",onClick:function(){u(i+1)}},i))}),g=(a(38),function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),r=a[0],l=a[1],c=Object(n.useState)([]),u=Object(s.a)(c,2),p=u[0],b=u[1],E=Object(n.useState)(""),f=Object(s.a)(E,2),_=f[0],v=f[1],h=Object(n.useState)([]),N=Object(s.a)(h,2),j=N[0],O=N[1],g=Object(n.useContext)(d),H=Object(n.useContext)(i);Object(n.useEffect)((function(){b(e.posts);var t,a=Object(C.a)(g.users);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.roomId===e.id){O([].concat(Object(m.a)(j),[n.username]));break}v("user"),l(!0)}}catch(o){a.e(o)}finally{a.f()}}),[]);var x=p.map((function(e){return o.a.createElement(k,{title:e.title,upVote:e.upVote,downVote:e.downVote},e.description)})),S=j.map((function(e,t){return o.a.createElement("li",{key:t,style:{listStyle:"none"}},e)}));return o.a.createElement("div",{className:"room__container"},o.a.createElement("h1",{className:"room__title"},e.name),r&&o.a.createElement(y,{show:r,type:_,closeHandler:l,setPost:function(t){for(var a in b([].concat(Object(m.a)(p),[t])),H.rooms)a.id===e.id&&a.posts.push(t)},addUser:function(e){O([].concat(Object(m.a)(j),[e]))}}),o.a.createElement("div",{className:"room__content"},o.a.createElement("section",{className:"room__postList"},x),o.a.createElement("section",{className:"room__userList"},"Active Users",o.a.createElement("ul",null,S))),o.a.createElement("button",{className:"room__btn-add",type:"button",onClick:function(){v("post"),l(!0)}},"Add Post"))}),H=function(){var e=Object(n.useContext)(i).rooms.map((function(e){return o.a.createElement(b.a,{key:e.id,path:"/chatroom-prototype/room/".concat(e.id),exact:!0},o.a.createElement(g,{name:e.name,theme:e.theme,availability:e.availability,posts:e.posts,id:e.id}))}));return o.a.createElement(o.a.Fragment,null,o.a.createElement(E,null),o.a.createElement(b.c,null,e,o.a.createElement(b.a,{path:"/chatroom-prototype",exact:!0},o.a.createElement(O,null))))};l.a.render(o.a.createElement(c.a,null,o.a.createElement(u,null,o.a.createElement(p,null,o.a.createElement(H,null)))),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.12edaa86.chunk.js.map